(window["webpackJsonpjeojjang-web"]=window["webpackJsonpjeojjang-web"]||[]).push([[0],[,,,,,,function(e,t,a){e.exports=a(20)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),o=a.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(2),i=a.n(l),s=a(3),u=a(1),m=(a(12),a(13),window.location.pathname.slice(1)),d=Object({NODE_ENV:"production",PUBLIC_URL:""}).PROJECT_DOMAIN?"https://".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).PROJECT_DOMAIN,".glitch.me/api"):"https://jeojjang.glitch.me/api",f="".concat(d,"/user/").concat(m),g="".concat(d,"/media/").concat(m,"?limit=25"),v="".concat(d,"/count/").concat(m,"?"),b="".concat(d,"/tags");function p(e,t){return fetch(e).then(function(e){return t?e.text():e.json()}).catch(console.error)}function h(){if(""!==m)return p(f)}function E(e){return y.apply(this,arguments)}function y(){return(y=Object(s.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=v,t&&(a+="&tags=".concat(t)),e.next=4,p(a,!0);case 4:return n=e.sent,e.abrupt("return",Math.ceil(n/25));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(){return w.apply(this,arguments)}function w(){return(w=Object(s.a)(i.a.mark(function e(){var t,a,n,r,c=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:1,a=c.length>1?c[1]:void 0,n=g,t&&(n+="&page=".concat(t)),a&&(n+="&tags=".concat(a)),e.next=7,p(n);case 7:return r=(r=e.sent).map(function(e){var t=e.id,a=e.link,n=e.tags,r=e.createdAt;return r=new Date(r),{id:t,link:a,tags:n,savedAt:"".concat(r.getMonth()+1,"/").concat(r.getDate(),"/")+r.getFullYear()}}),e.abrupt("return",r);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var j=window.location.origin+window.location.pathname,O=new URLSearchParams(window.location.search),k=O.get("tags"),x=O.get("page");function C(e){e?O.set("tags",e):O.delete("tags"),O.delete("page");var t=O.toString();R(j+(t?"?".concat(t):""))}function S(e){O.set("page",e),R(j+"?"+O.toString())}function R(e){window.location.href=e}function I(){return k||""}function L(){return x||1}var D="`1234567890-=qwertyuiop[]\\asdfghjkl;'zxcvbnm,./ ".split("");function A(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useState)(),c=Object(u.a)(a,2),o=c[0],l=c[1],m=Object(n.useState)(),d=Object(u.a)(m,2),f=d[0],g=d[1],v=function(){var a=Object(s.a)(i.a.mark(function a(){var n,r,c;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h();case 2:if(n=a.sent){a.next=7;break}return e.current.style="display: none;",t.current.className+=" justify-content-center",a.abrupt("return");case 7:r=n.tag,c=n.avatarURL,l(r),g(c);case 10:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}();Object(n.useEffect)(function(){v()},[]);var b=Object(n.useRef)();Object(n.useEffect)(function(){var e=b.current;e.value=I(),document.onkeydown=function(t){var a=t.key;D.includes(a)&&e.focus()}},[]);return r.a.createElement("div",{className:"header navbar navbar-expand sticky-top"},r.a.createElement("div",{className:"user",ref:e},r.a.createElement("img",{className:"avatar",src:f,alt:"User Avatar"}),r.a.createElement("h1",{className:"username"},o)),r.a.createElement("div",{className:"collapse navbar-collapse",ref:t},r.a.createElement("form",{className:"form-inline",id:"search",onSubmit:function(e){e.preventDefault(),C(e.target.firstChild.firstChild.value)}},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{className:"search-input form-control",type:"search","aria-label":"Search",placeholder:"Search by tag/s...",spellCheck:"false",ref:b}),r.a.createElement("button",{className:"btn search-icon",form:"search"},r.a.createElement("img",{src:"search.svg",alt:"search icon"}))))))}a(14),a(15);var F=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i;function M(e){var t=e.match(F);return Object(u.a)(t,2)[1]}function U(e){var t=e.media,a=e.setClicked,c=t.link,o=Object(n.useRef)(),l=r.a.createElement("img",{className:"media",src:c,alt:"media item"});if(c.includes("gfycat.com")&&!c.includes(".gif")){var i=c.match(/gfycat\.com\/(.+?)(?=$|[^a-z])/i),s=Object(u.a)(i,2)[1];l=r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"gif",src:"https://miro.medium.com/max/2048/1*aKQW5LeudHfno2eopICRBQ.png",alt:"gfycat icon"}),r.a.createElement("video",{className:"media",ref:o,loop:!0,preload:"metadata",src:"https://thumbs.gfycat.com/".concat(s,"-mobile.mp4"),onMouseOver:function(e){return e.target.play()},onMouseLeave:function(e){return e.target.pause()}}))}else if(c.match(/\.mp4|\.webm/i))l=r.a.createElement("video",{className:"media",src:c,controls:!0,preload:"metadata",onClick:function(e){return e.preventDefault()},controlsList:"nofullscreen"});else if(c.match(/youtube\.com|youtu\.be/g)){var m=M(c);l=r.a.createElement("div",{className:"youtube"},r.a.createElement("img",{className:"youtube-icon",alt:"youtube icon",src:"youtube.svg"}),r.a.createElement("img",{className:"media",alt:"media item",src:"https://i.ytimg.com/vi/".concat(m,"/hqdefault.jpg")}))}return r.a.createElement("div",{className:"media-container",title:"Click to enlarge",onClick:function(){o.current&&o.current.pause(),a(t)},"data-toggle":"modal","data-target":"#lightbox-modal"},l)}a(16),a(17);function _(e){var t=e.tags;return t?t.map(function(e){return r.a.createElement("div",{className:"tag clickable","data-dismiss":"modal",key:e,onClick:function(e){C(e.target.textContent)}},e)}):r.a.createElement(r.a.Fragment,null)}function B(e){var t=e.media,a=Object(n.useState)(!1),c=Object(u.a)(a,2),o=c[0],l=c[1],i=Object(n.useRef)();Object(n.useEffect)(function(){i.current&&new MutationObserver(function(e){var t=!0,a=!1,n=void 0;try{for(var r,c=function(){var e=r.value.target.className.includes("show");if(e)return{v:l(e)};setTimeout(function(){return l(e)},200)},o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var i=c();if("object"===typeof i)return i.v}}catch(s){a=!0,n=s}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}}).observe(i.current,{attributes:!0,attributeFilter:["class"]})},[i]);var s=t?t.id:"",m=t?t.link:"",d=t?t.tags:[],f=t?t.savedAt:"",g=r.a.createElement("img",{className:"media",src:m,alt:"test lightbox"});if(m.includes("gfycat.com")&&!m.includes(".gif"))g=r.a.createElement("video",{className:"media",autoPlay:!0,loop:!0,preload:"metadata",src:m}),m=m.replace("giant.","").replace(".mp4","");else if(m.match(/\.mp4|\.webm/i))g=r.a.createElement("video",{className:"media",src:m,preload:"metadata",controls:!0});else if(m.match(/youtube\.com|youtu\.be/g)){var v=M(m);g=r.a.createElement("div",{className:"media"},r.a.createElement("iframe",{title:"youtube",frameBorder:"0",src:"https://www.youtube.com/embed/".concat(v),allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))}return r.a.createElement("div",{className:"modal fade lightbox",id:"lightbox-modal",tabIndex:"-1",role:"dialog","aria-labelledby":"lightbox modal","aria-hidden":"true",ref:i},r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7")),r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-body"},o?g:r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"lightbox-info scrollable"},r.a.createElement("div",{className:"lightbox-info-section text-truncate"},"Tags"),r.a.createElement("hr",null),r.a.createElement("div",{className:"tags"},r.a.createElement(_,{tags:d})),r.a.createElement("hr",null),r.a.createElement("div",{className:"lightbox-info-section"},"Link ",r.a.createElement("a",{className:"text-truncate",rel:"noopener noreferrer",href:m,target:"_blank"},m)),r.a.createElement("hr",null),r.a.createElement("div",{className:"lightbox-info-section footer id"},"ID: ",s),r.a.createElement("div",{className:"lightbox-info-section footer saved-date"},"saved at ",f))))))}function P(e){var t=e.media,a=Object(n.useState)(),c=Object(u.a)(a,2),o=c[0],l=c[1];return r.a.createElement("div",{className:"gallery"},r.a.createElement(B,{media:o}),t?t.map(function(e){return r.a.createElement(U,{key:"".concat(e.id,"-").concat(e.link),media:e,setClicked:l})}):null)}a(18);function T(e){var t=e.pages;if(!t||1===t)return r.a.createElement("div",{className:"pager"});var a=parseInt(L()),n=a>1,c=a<t,o=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=a+(e?c?1:a:n?-1:a);S(t)};return r.a.createElement("div",{className:"pager"},r.a.createElement("button",Object.assign({className:n?"":"disabled"},n?{}:{disabled:!0},{onClick:function(){return o(!1)}}),r.a.createElement("img",{src:"back.svg",alt:"back"})),a," / ",t,r.a.createElement("button",Object.assign({className:c?"":"disabled"},c?{}:{disabled:!0},{onClick:function(){return o()}}),r.a.createElement("img",{src:"forward.svg",alt:"forward"})))}a(19);function J(e){var t=e.media,a=Object(n.useState)([]),c=Object(u.a)(a,2),o=c[0],l=c[1],d=function(){var e=Object(s.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(b);case 2:t=e.sent,l(t.map(function(e){return e.name}).sort(function(e,t){return e.localeCompare(t)}));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){m?t&&l(t.reduce(function(e,t){var a=t.tags;return e.concat(a)},[]).filter(function(e,t,a){return a.indexOf(e)===t}).sort(function(e,t){return e.localeCompare(t)})):d()},[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tags-button","data-toggle":"modal","data-target":"#tags-modal"},r.a.createElement("img",{src:"tags.svg",alt:"tags icon"})),r.a.createElement("div",{className:"modal fade",id:"tags-modal",tabIndex:"-1",role:"dialog"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content tags"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},"All Tags (",o.length,")"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body scrollable"},r.a.createElement(_,{tags:o}))))))}o.a.render(r.a.createElement(function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(),l=Object(u.a)(o,2),m=l[0],d=l[1],f=function(){var e=Object(s.a)(i.a.mark(function e(){var t,a,n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=I(),a=L(),e.next=4,E(t);case 4:return n=e.sent,d(n),e.next=8,N(a,t);case 8:r=e.sent,c(r);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){f()},[c]),r.a.createElement("div",null,r.a.createElement(A,null),r.a.createElement(P,{media:a}),r.a.createElement(T,{media:a,pages:m}),r.a.createElement(J,{media:a}))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[6,1,2]]]);
//# sourceMappingURL=main.0ef7efc6.chunk.js.map