const testmedia =
[
  {
    link: "https://giant.gfycat.com/BreakableThriftyDikkops.mp4",
    tags: [
      "nayeon",
      "bunny",
      "wave"
    ],
    createdAt: "Tue Sep 24 2019"
  },
  {
    link: "https://giant.gfycat.com/PointlessImpracticalBengaltiger.mp4",
    tags: [
      "nayeon",
      "cute",
      "smile"
    ],
    createdAt: "Tue Sep 24 2019"
  },
  {
    link: "https://giant.gfycat.com/RashSaltyHornet.mp4",
    tags: [
      "nayeon",
      "cute"
    ],
    createdAt: "Tue Sep 24 2019"
  },
  {
    link: "https://giant.gfycat.com/SlowAmazingIvorybilledwoodpecker.mp4",
    tags: [
      "nayeon",
      "cute",
      "smile",
      "uwu"
    ],
    createdAt: "Tue Sep 24 2019"
  },
  {
    link: "https://cdn.discordapp.com/attachments/603532291909746693/609057419573854208/heartlipped-20190730.jpg",
    tags: [
      "nayeon",
      "cute",
      "wallpaper"
    ],
    createdAt: "Wed Sep 25 2019"
  },
  {
    link: "https://giant.gfycat.com/ThreadbareForthrightChipmunk.mp4",
    tags: [
      "mindbreakinglyattractive"
    ],
    createdAt: "Thu Sep 26 2019"
  },
  {
    link: "https://cdn.discordapp.com/attachments/533551478787276800/626543986965872660/tumblr_otlfix7cUB1ujcaa1o1_1280.jpg",
    tags: [
      "dahyun",
      "swag",
      "dots"
    ],
    createdAt: "Thu Sep 26 2019"
  },
  {
    link: "https://cdn.discordapp.com/attachments/533551478787276800/626461350335348786/DxSAJ7nU8AAuxmz.png",
    tags: [
      "dahyun",
      "noximspam",
      "legs",
      "slightlywarm"
    ],
    createdAt: "Thu Sep 26 2019"
  },
  {
    link: "https://www.youtube.com/watch?v=4EZtdGL9dOA",
    tags: [
      "dahyun",
      "slightlywarm",
      "dahyunism",
      "#thisismyreligion"
    ],
    createdAt: "Thu Sep 26 2019"
  },
  {
    link: "https://youtu.be/OhK3ZJN_iV0",
    tags: [
      "nayeon",
      "nayeon tv",
      "pretty"
    ],
    createdAt: "Thu Sep 26 2019"
  },
  {
    link: "https://cdn.discordapp.com/attachments/138195029607841792/626660951390945280/bunny_angel.webm",
    tags: [
      "nayeon",
      "webm test"
    ],
    createdAt: "Thu Sep 26 2019"
  },
  {
    link: 'https://giant.gfycat.com/TightFantasticBorer.mp4',
    tags: [ 'nayeon', '12', 'cute' ],
    createdAt: '2019-09-24T11:00:51.698Z',
  },
  {
    link: 'https://cdn.discordapp.com/attachments/138195029607841792/547424354854633473/Nayeon_327.jpg',
    tags: [ 'nayeon', '1' ],
    createdAt: '2019-09-24T11:00:51.698Z',
  },
  {
    link: 'https://cdn.discordapp.com/attachments/138195029607841792/608821248675282985/EBZ3O9bUIAE3gdp.jpg_orig.jpg',
    tags: [ 'nayeon', '2', 'a tag' ],
    createdAt: '2019-09-24T11:00:51.698Z',
  },
  {
    link: 'https://cdn.discordapp.com/attachments/486438330989281280/605329457393303572/cherry922-1155728670805200897-20190729_083602-img1.jpg',
    tags: [ 'nayeon', '3', 'this', 'thing', 'has', 'many', 'tags', 'cute' ],
    createdAt: '2019-09-24T11:00:51.698Z',
  },
  {
    link: 'https://video.twimg.com/tweet_video/DlWnX5bUYAALkG2.mp4',
    tags: [ 'nayeon', 'twitter', 'a tag' ],
    createdAt: '2019-09-24T11:00:51.698Z',
  },
  {
    link: 'https://youtu.be/i0p1bmr0EmE',
    tags: [ 'what is love', 'youtube' ],
    createdAt: '2019-09-24T11:00:51.698Z',
  },
  {
    link: 'https://giant.gfycat.com/OnlyAnxiousKatydid.mp4',
    tags: [ 'nayeon', 'cute' ],
    createdAt: '2019-09-24T11:00:51.698Z',
  },
  {
    link: 'https://cdn.discordapp.com/attachments/138195029607841792/611181543758757888/image0.jpg',
    tags: [ 'nayeon', '4' ],
    createdAt: '2019-09-24T11:00:51.698Z',
  },
  {
    link: 'https://cdn.discordapp.com/attachments/138195029607841792/611402735958491138/Dxbk-Y3UwAAnnrS.jpg',
    tags: [ 'nayeon', '5', 'a tag' ],
    createdAt: '2019-09-24T11:00:51.698Z',
  },
  {
    link: 'https://giant.gfycat.com/BarrenCelebratedAmericanredsquirrel.webm',
    tags: [ 'nayeon', '6', 'cute', 'signal' ],
    createdAt: '2019-09-24T11:00:51.698Z',
  },
  {
    link: 'https://cdn.discordapp.com/attachments/603532291909746693/606517818292305921/D54ApJfU8AA17mJ.jpeg',
    tags: [ 'nayeon', '7' ],
    createdAt: '2019-09-24T11:00:51.698Z',
  },
  {
    link: 'https://cdn.discordapp.com/attachments/486438330989281280/610862997631402015/heartlipped-1161304084881629184-20190813_175044-img1.jpg',
    tags: [ 'nayeon', '8' ],
    createdAt: '2019-09-24T11:00:51.698Z',
  },
  {
    link: 'https://cdn.discordapp.com/attachments/138195029607841792/611046618493485066/EB5sSHkXkAAcGJt.jpg',
    tags: [ 'nayeon', '9' ],
    createdAt: '2019-09-24T11:00:51.698Z',
  },
  {
    link: 'https://cdn.discordapp.com/attachments/533551254723624960/611482860125290496/IMG_20190815_165344.jpg',
    tags: [ 'nayeon', '10', 'a tag', 'cute' ],
    createdAt: '2019-09-24T11:00:51.698Z',
  },
  {
    link: 'https://thumbs.gfycat.com/FlamboyantFickleIceblueredtopzebra-size_restricted.gif',
    tags: [ 'nayeon', '11' ],
    createdAt: '2019-09-24T11:00:51.698Z',
  },
  {
    link: 'https://pbs.twimg.com/media/EFrtGT8U8AEBIgf.jpg:orig',
    tags: [ 'nayeon', 'feel special', 'fansign' ],
    createdAt: '2019-09-30T11:09:51.698Z',
  },
  {
    link: 'https://www.youtube.com/watch?v=q04LpevqDlU&feature=youtu.be',
    tags: [ 'nayeon', 'feel special', 'youtube', 'fansign' ],
    createdAt: '2019-09-30T11:09:51.698Z',
  },
  {
    link: 'https://giant.gfycat.com/FlowerySevereFoal.mp4',
    tags: [ 'nayeon', 'feel special', 'cute', 'smile' ],
    createdAt: '2019-09-30T11:09:51.698Z',
  },
  {
    link: 'https://cdn.discordapp.com/attachments/486438330989281280/627865960451407872/69763693_205676917099615_5134953586748046269_n.jpg',
    tags: [ 'nayeon', 'wig', 'blonde' ],
    createdAt: '2019-09-30T11:09:51.698Z',
  },
  {
    link: 'https://cdn.discordapp.com/attachments/486438330989281280/628163237258461196/TREE901334591-1178497738574401536-20190930_043210-img2.jpg',
    tags: [ 'nayeon', 'heart' ],
    createdAt: '2019-09-30T11:09:51.698Z',
  },
  {
    link: 'https://giant.gfycat.com/DependableDifficultGhostshrimp.mp4',
    tags: [ 'nayeon', 'heart', 'bunny teeth' ],
    createdAt: '2019-09-30T11:09:51.698Z',
  },
  {
    link: 'https://cdn.discordapp.com/attachments/486438330989281280/560801354487169024/D2vSsrbVAAIz_sy.png',
    tags: [ 'nayeon', 'glasses' ],
    createdAt: '2019-09-30T11:09:51.698Z',
  },
  {
    link: 'https://cdn.discordapp.com/attachments/486438330989281280/622818316444237864/imbunnybong-1173256253121806339-20190915_172423-img1.jpg',
    tags: [ 'nayeon', 'glasses' ],
    createdAt: '2019-09-30T11:09:51.698Z',
  },
  {
    link: 'https://giant.gfycat.com/TatteredFriendlyKingsnake.mp4',
    tags: [ 'nayeon', 'glasses' ],
    createdAt: '2019-09-30T11:09:51.698Z',
  },
].map((item, i) =>
{
  item.id = i + 1;
  const createdAt = new Date(item.createdAt);
  item.savedAt = `${createdAt.getMonth() + 1}/${createdAt.getDate()}/`
    + createdAt.getFullYear();
  return item;
});

const paginate = array => array.reduce((pages, item, i) =>
{
  const page = Math.floor(i / 25);
  if(!pages[page])
    pages[page] = [];

  pages[page].push(item);
  return pages;
}, []);

const pages = paginate(testmedia);

function getTestMedia(page = 1)
{
  return pages[page - 1];
}

function getTestPages()
{
  return pages.length;
}

const filteredPages = search =>
{
  const filteredMedia = testmedia
    .filter(({ tags }) =>
    {
      let filter = search;
      if(!filter || filter === '')
        return false;

      filter = filter.toLowerCase();
      if(!filter.includes(','))
        return tags.some(tag => tag.includes(filter || ''));

      filter = filter.split(',').map(word => word.trim());
      return filter.every(word => tags.some(tag => tag.includes(word)));
    })
    // .map(({ id }) => id);

  return paginate(filteredMedia);
}

function searchTest(search, page = 1)
{
  return filteredPages(search)[page - 1];
}

function searchTestPages(search)
{
  return filteredPages(search).length;
}

const testuser =
{
  tag: 'esfox#2053',
  avatarURL: 'https://cdn.discordapp.com/avatars/247955535620472844/1c8b5af7fc1dc396420e7ce81d1ffd0f.png?size=2048',
};

const testtags =
[
  'this', 'is', 'a', 'test', 'for',
  'showing', 'tags', 'as', 'pills',
  'this', 'is', 'a', 'test', 'for',
  'showing', 'tags', 'as', 'pills',
  'this', 'is', 'a', 'test', 'for',
  'showing', 'tags', 'as', 'pills',
  'this', 'is', 'a', 'test', 'for',
  'showing', 'tags', 'as', 'pills',
  'this', 'is', 'a', 'test', 'for',
  'showing', 'tags', 'as', 'pills',
  'this', 'is', 'a', 'test', 'for',
  'showing', 'tags', 'as', 'pills',
  'this', 'is', 'a', 'test', 'for',
  'showing', 'tags', 'as', 'pills',
  'this', 'is', 'a', 'test', 'for',
  'showing', 'tags', 'as', 'pills',
  'this', 'is', 'a', 'test', 'for',
  'showing', 'tags', 'as', 'pills',
  'this', 'is', 'a', 'test', 'for',
  'showing', 'tags', 'as', 'pills',
  'this', 'is', 'a', 'test', 'for',
  'showing', 'tags', 'as', 'pills',
  'this', 'is', 'a', 'test', 'for',
  'showing', 'tags', 'as', 'pills',
  'this', 'is', 'a', 'test', 'for',
  'showing', 'tags', 'as', 'pills',
  'this', 'is', 'a', 'test', 'for',
  'showing', 'tags', 'as', 'pills',
  'this', 'is', 'a', 'test', 'for',
  'showing', 'tags', 'as', 'pills',
  'this', 'is', 'a', 'test', 'for',
  'showing', 'tags', 'as', 'pills',
  'this', 'is', 'a', 'test', 'for',
  'showing', 'tags', 'as', 'pills',
  'this', 'is', 'a', 'test', 'for',
  'showing', 'tags', 'as', 'pills',
];

export {
  getTestMedia,
  getTestPages,
  searchTest,
  searchTestPages,
  testtags,
  testuser,
};
